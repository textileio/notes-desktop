!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="build/",n(n.s=14)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-dom")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(19),r=n(20),s={logout:o.createAction("app/LOGOUT"),startup:o.createAction("app/Startup"),startupSuccess:o.createAction("app/StartupSuccess"),connectionFailure:o.createAction("app/ConnectionFailure"),getDisplayName:o.createAction("app/GetDislpayName"),setDisplayName:o.createAction("app/SetDisplayName",e=>t=>e({name:t})),createOrUpdateThread:o.createAction("app/CreateOrUpdateThread"),setThreadId:o.createAction("app/SetThreadId",e=>t=>e({threadId:t})),updateActiveNote:o.createAction("app/UpdateActiveNote",e=>t=>e({value:t})),addOrUpdate:o.createAction("app/AddOrUpdate",e=>t=>e({note:t})),linkBlockToNote:o.createAction("app/LinkBlockToNote",e=>(t,n)=>e({key:t,block:n})),selectNote:o.createAction("app/SelectNote",e=>t=>e({note:t})),fetchNewNote:o.createAction("app/FetchNewNote",e=>t=>e({blockId:t})),saveNote:o.createAction("app/SaveNote"),saveNoteSuccess:o.createAction("app/SaveNoteSuccess"),setNotes:o.createAction("app/setNotes",e=>t=>e({notes:t})),clearNote:o.createAction("app/ClearNote"),deleteNote:o.createAction("app/DeleteNote"),deleteNoteSuccess:o.createAction("app/DeleteNoteSuccess"),deleteNoteFailure:o.createAction("app/DeleteNoteFailure",e=>t=>e({block:t})),syncDeleteSuccess:o.createAction("app/SyncDeleteSuccess",e=>t=>e({block:t})),markOutOfDate:o.createAction("app/MarkOutOfDate"),markSynced:o.createAction("app/MarkSynced")},i={connection:"starting",sessions:0,notes:[],pendingDeletes:[]};t.AppSelectors={notes:(e,t)=>t?e.app.notes.filter(e=>!e.block):e.app.notes,activeNote:e=>e.app.activeNote,appThreadId:e=>e.app.appThreadId,selectPendingDelete:e=>e.app.pendingDeletes.length>0?e.app.pendingDeletes[0]:void 0,connected:e=>"success"===e.app.connection},t.reducer=function(e=i,t){switch(t.type){case o.getType(s.logout):return i;case o.getType(s.startup):return Object.assign({},e,{connection:"starting"});case o.getType(s.startupSuccess):return Object.assign({},e,{connection:"success",sessions:e.sessions+1});case o.getType(s.connectionFailure):return Object.assign({},e,{connection:"failure"});case o.getType(s.setThreadId):return Object.assign({},e,{appThreadId:t.payload.threadId});case o.getType(s.saveNoteSuccess):return e.activeNote?Object.assign({},e,{activeNote:Object.assign({},e.activeNote,{saved:!0})}):e;case o.getType(s.updateActiveNote):{const{value:n}=t.payload,o=(new Date).getTime(),s=n.toJSON(),i=n.document.getBlocks().map(e=>e?`${e.text}\n`:"\n").join();if(e.activeNote){const t=e.activeNote.block?e.activeNote.block:e.activeNote.refBlock;return Object.assign({},e,{activeNote:Object.assign({},e.activeNote,{value:s,saved:!1,block:void 0,text:i,updated:o,refBlock:t})})}const a=r.Md5.hashStr(JSON.stringify(s)).toString();return Object.assign({},e,{activeNote:{value:s,key:a+String(o),created:o,updated:o,text:i}})}case o.getType(s.addOrUpdate):{const{note:n}=t.payload,o=e.notes.find(e=>e.key===n.key),r=!o||n.updated>o.updated?n:Object.assign({},o,{block:n.block}),s=e.notes.filter(e=>e.key!==r.key);s.push(r);const i=e.activeNote;return i&&i.key===r.key&&(i.block=r.block),Object.assign({},e,{notes:s,activeNote:i})}case o.getType(s.linkBlockToNote):{const{key:n,block:o}=t.payload,r=e.notes.map(e=>n===e.key?Object.assign({},e,{block:o}):e);return Object.assign({},e,{notes:r,activeNote:e.activeNote&&e.activeNote.key===n?Object.assign({},e.activeNote,{block:o}):e.activeNote})}case o.getType(s.setDisplayName):{const{name:n}=t.payload;return Object.assign({},e,{name:n})}case o.getType(s.clearNote):return Object.assign({},e,{activeNote:void 0});case o.getType(s.selectNote):{const{note:n}=t.payload;return Object.assign({},e,{activeNote:Object.assign({},n,{refBlock:n.block,saved:!0})})}case o.getType(s.setNotes):return Object.assign({},e,{notes:t.payload.notes});case o.getType(s.deleteNoteSuccess):{const{activeNote:t,notes:n}=e;return t?Object.assign({},e,{activeNote:void 0,notes:n.filter(e=>e.key!==t.key)}):e}case o.getType(s.deleteNoteFailure):{const{block:n}=t.payload;return Object.assign({},e,{pendingDeletes:[...e.pendingDeletes,n]})}case o.getType(s.syncDeleteSuccess):{const{block:n}=t.payload;return Object.assign({},e,{pendingDeletes:e.pendingDeletes.filter(e=>e!==n)})}case o.getType(s.markOutOfDate):return Object.assign({},e,{unsynced:!0});case o.getType(s.markSynced):return Object.assign({},e,{unsynced:!1});default:return e}},t.default=s},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("@material-ui/icons")},function(e,t,n){},function(e,t){e.exports=require("react-modal")},function(e,t){e.exports=require("@material-ui/core/Tooltip")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("@textile/js-http-client")},,,,,function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(15),s=n(16),i=o(n(24)),a=o(n(38)),l=n(39),c=n(3),u=o(n(0)),d=o(n(1));n(40);const p=document.getElementById("app"),{store:f,persistor:h}=s.configureStore(a.default);d.default.render(u.default.createElement(class extends u.default.Component{constructor(e){super(e)}render(){return setTimeout(()=>{r.ipcRenderer.send("app-is-ready")},5e3),u.default.createElement("div",{className:"app"},u.default.createElement(c.Provider,{store:f},u.default.createElement(l.PersistGate,{loading:void 0,persistor:h},u.default.createElement(i.default,null))))}},null),p)},function(e,t){e.exports=require("electron")},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),s=o(n(17)),i=n(18),a=o(n(2)),l=o(n(21)),c=o(n(22));t.configureStore=(e=>{const t={key:"io.textile.pages",storage:e},n=i.persistReducer(t,l.default),o=s.default(),u=window,d=u.__REDUX_DEVTOOLS_EXTENSION__&&u.__REDUX_DEVTOOLS_EXTENSION__(),p=r.createStore(n,r.compose(r.applyMiddleware(o),d)),f=i.persistStore(p,void 0,()=>p.dispatch(a.default.startup()));return o.run(c.default),{store:p,persistor:f}})},function(e,t){e.exports=require("redux-saga")},function(e,t){e.exports=require("redux-persist")},function(e,t){e.exports=require("typesafe-actions")},function(e,t){e.exports=require("ts-md5/dist/md5")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(8),r=n(2);t.default=o.combineReducers({app:r.reducer})},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(23),i=o(n(2)),a=r(n(9));t.notesAppKey="io.textile.notes.desktop-primary.v0.0.1";const l={name:"io.textile.notes_primary_v0.0.1",mill:"/json",json_schema:{definitions:{},$schema:"http://json-schema.org/draft-07/schema#",$id:"http://example.com/root.json",type:"object",title:"",required:["key","text","value","updated","created"],properties:{key:{type:"string"},text:{type:"string"},value:{type:"object"},updated:{type:"integer"},created:{type:"integer"}}}};function*c(){yield s.takeLatest("app/Startup",y)}function*u(){yield s.takeLatest("app/GetDislpayName",m)}function*d(){yield s.takeLatest("app/DeleteNote",g)}function*p(){yield s.takeLatest("app/SaveNote",v)}function*f(){yield s.takeLatest("app/CreateOrUpdateThread",b)}function*h(){yield s.takeLatest("app/FetchNewNote",S)}function*y(){try{const e=yield s.call([a.default.account,"address"]);console.info("INFO - Textile connection success"),console.info(`INFO - ${e}`),yield s.put(i.default.getDisplayName()),yield s.put(i.default.createOrUpdateThread());const{failure:t}=yield s.race({failure:s.take("app/ConnectionFailure"),timeout:s.delay(1500)});t||(yield s.put(i.default.startupSuccess()))}catch(e){console.error("ERROR -- Textile connection failure"),yield s.put(i.default.connectionFailure())}}function*m(){try{const e=yield s.call([a.default.profile,"name"]);yield s.put(i.default.setDisplayName(e))}catch(e){console.error("ERROR --",e),yield s.put(i.default.connectionFailure())}}function*g(e){const t=yield s.select(i.AppSelectors.activeNote);t&&t.block&&(yield s.call(_,t.block)),t&&t.refBlock&&(yield s.call(_,t.refBlock)),yield s.put(i.default.deleteNoteSuccess())}function*v(e){const t=yield s.select(i.AppSelectors.notes),n=yield s.select(i.AppSelectors.activeNote),o=[...t.filter(e=>e.key!==n.key),n];yield s.put(i.default.setNotes(o)),yield s.put(i.default.saveNoteSuccess()),n.refBlock&&(yield s.call(_,n.refBlock)),yield s.call(O,n)}function*b(){try{const e=yield s.call([a.default.threads,"getByKey"],t.notesAppKey);if(e)console.info("INFO -- existing app thread found"),yield s.put(i.default.setThreadId(e.id)),yield s.call(w,e.id);else{console.info("INFO -- initializing app thread");const e=yield s.call([a.default.schemas,"add"],l),n=yield s.call([a.default.threads,"add"],"textile-pages-desktop",e.hash,t.notesAppKey);yield s.put(i.default.setThreadId(n.id)),yield s.call(w,n.id)}}catch(e){console.error("ERROR --",e),yield s.put(i.default.connectionFailure())}}function*k(e,t){console.error(e,t.message),yield s.put(i.default.connectionFailure()),yield s.put(i.default.markOutOfDate())}function*N(){let e=yield s.select(i.AppSelectors.selectPendingDelete);for(;e;){(yield s.select(i.AppSelectors.connected))?(yield s.call(_,e),(yield s.put(i.default.syncDeleteSuccess(e)))?e=yield s.select(i.AppSelectors.selectPendingDelete):(yield s.put(i.default.markOutOfDate()),e=void 0)):(yield s.put(i.default.markOutOfDate()),e=void 0)}}function*_(e){try{yield s.call([a.default.blocks,"remove"],e)}catch(t){yield s.call(k,"removing block",t),yield s.put(i.default.deleteNoteFailure(e))}}function*O(e){const t=yield s.select(i.AppSelectors.appThreadId),n={key:e.key,text:e.text,created:e.created,updated:e.updated,value:e.value},o=yield s.call([a.default.files,"add"],JSON.stringify(n),"",t);try{yield s.put(i.default.linkBlockToNote(e.key,o.block))}catch(e){yield s.call(k,"finalizing save",e)}}function*x(e){const{block:t,files:n}=e,o=yield s.call([a.default.file,"content"],n[0].file.hash),r=JSON.parse(o);return Object.assign({},r,{block:t})}function*S(){const e=yield s.select(i.AppSelectors.appThreadId),t=yield s.call([a.default.files,"list"],e,"",2);for(const e of t.items){const t=yield s.call(x,e);yield s.put(i.default.addOrUpdate(t))}}function*w(e){const t=yield s.select(i.AppSelectors.notes,!0);if(t.length)for(const e of t)e.block||(yield s.call(O,e));yield s.call(N);const n=yield s.call([a.default.files,"list"],e,"",100);for(const e of n.items){const t=yield s.call(x,e);yield s.put(i.default.addOrUpdate(t))}(yield s.select(i.AppSelectors.selectPendingDelete))||(yield s.put(i.default.markSynced()))}function*E(){let e=yield s.select(i.AppSelectors.connected);for(;!e;)if(yield s.delay(5e3),!(e=yield s.select(i.AppSelectors.connected)))try{yield s.call([a.default.account,"address"]),yield s.put(i.default.startup())}catch(e){console.info("ERROR --",e.message)}}function*D(){for(;;)yield s.take("app/ConnectionFailure"),yield s.race([s.call(E),s.take("app/StartupSuccess")])}t.default=function*(){yield s.all([s.fork(c),s.fork(u),s.fork(f),s.fork(h),s.fork(p),s.fork(d),s.fork(D)])}},function(e,t){e.exports=require("redux-saga/effects")},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(0)),i=n(3),a=r(n(6)),l=r(n(2)),c=r(n(7)),u=o(n(4)),d=r(n(25)),p=r(n(29)),f=r(n(30)),h=r(n(32)),y=n(37);n(5);const m={background:"#2935ff",color:"white",display:"flex"},g={width:"96vw",maxWidth:"100%",padding:"2vw"},v={background:"#2935ff",padding:5,color:"white",marginRight:4,cursor:"pointer"},b={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};t.defaultValue=y.Value.fromJSON({object:"value",document:{object:"document",data:{},nodes:[{object:"block",type:"paragraph",data:{},nodes:[{object:"text",leaves:[{object:"leaf",text:"",marks:[]}]}]}]}});t.default=i.connect(e=>{const t="failure"===e.app.connection,n="success"===e.app.connection;let o=!1,r="";"failure"===e.app.connection&&0===e.app.sessions&&(r='To run the Notes app, you first need to setup your                  Textile account on your computer. To get started,                  head over to the <a target="_blank" href="https://docs.textile.io/install/desktop/">                 setup instructions</a>.                  Click ignore to run in offline mode.',o=!0);const s=!e.app.activeNote||!e.app.activeNote.block,i=e.app.activeNote&&!e.app.activeNote.saved||!1;return Object.assign({},e.app,{modalText:r,showModal:o,showSyncIssue:t,requiresSave:i,requiresSync:s,showQRCodeLink:n})},e=>({updateCurrentNote:t=>e(l.default.updateActiveNote(t)),selectNote:t=>e(l.default.selectNote(t)),fetchNewNote:t=>e(l.default.fetchNewNote(t)),saveNote:()=>e(l.default.saveNote()),clearNote:()=>e(l.default.clearNote()),deleteNote:()=>e(l.default.deleteNote()),logout:()=>e(l.default.logout())}))(class extends s.Component{constructor(){super(...arguments),this.state={saved:!0,displayQRCode:!1,runInOfflineMode:!1,isDrawerOpen:!0,width:0,height:0,update:0},this.componentWillUnmount=(()=>{window.removeEventListener("resize",this.updateWindowDimensions)}),this.updateWindowDimensions=(()=>{this.setState({width:window.innerWidth,height:window.innerHeight})}),this.updateCurrentNote=(e=>{this.state.currentNote&&this.state.currentNote.document===e.document||(this.props.updateCurrentNote(e),this.setState({currentNote:e,currentNoteSaved:!1}))}),this.toggleDrawer=(()=>{this.setState({isDrawerOpen:!this.state.isDrawerOpen})}),this.selectNote=(e=>{const t=y.Value.fromJSON(e.value);this.setState({currentNote:t,currentNoteSaved:!0}),this.props.selectNote(e),this.toggleDrawer()}),this.clearNote=(()=>{this.props.clearNote(),this.setState({currentNote:t.defaultValue,currentNoteSaved:!0,isDrawerOpen:!1})}),this.saveAndSelectNote=(()=>{this.props.requiresSave&&(this.props.saveNote(),this.setState({isDrawerOpen:!1,currentNoteSaved:!0}))}),this.deleteNote=(()=>{this.props.deleteNote(),setTimeout(()=>{this.setState({currentNote:t.defaultValue,currentNoteSaved:!0,isDrawerOpen:!1})},500)}),this.logout=(()=>{this.props.logout(),this.setState({currentNote:t.defaultValue,currentNoteSaved:!0})}),this.displayQRCode=(()=>{this.setState({displayQRCode:!0})}),this.syncWarning=(()=>{if(this.props.showSyncIssue)return s.createElement(c.default,{title:"Unable to reach your Textile account."},s.createElement(u.SyncProblem,{style:Object.assign({},v,{background:"none",color:"gray",zIndex:2e3})}))}),this.ejectButton=(()=>s.createElement(c.default,{title:"Clear Session"},s.createElement(u.Eject,{onClick:this.logout,style:v}))),this.getNotePad=(()=>{if(this.props.connection&&this.state.currentNote)return s.createElement(d.default,{value:this.state.currentNote,onChange:this.updateCurrentNote,style:{width:"96vw",maxWidth:745,fontSize:18,height:"90%",resize:"none",padding:"2vw",border:"none",color:"#2b2b2b"}})})}componentDidMount(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.props.activeNote||this.state.currentNote||!this.props?this.props.activeNote&&!this.state.currentNote&&this.setState({currentNote:y.Value.fromJSON(this.props.activeNote.value)}):this.setState({currentNote:t.defaultValue})}render(){const e=document.getElementById("app")||{},t=this.state.width>1e3?"30%":"300px";return s.createElement("div",{style:{display:"flex",flexDirection:"column",padding:0,margin:0}},s.createElement("div",{style:{display:"flex",flexDirection:"row",margin:0,zIndex:1010}},s.createElement(p.default,{style:g,buttonStyle:v,requiresSave:this.props.requiresSave,requiresSync:this.props.requiresSync,saveAndSelectNote:this.saveAndSelectNote,toggleDrawer:this.toggleDrawer,clearNote:this.clearNote,deleteNote:this.deleteNote,showSyncIssue:this.props.showSyncIssue})),s.createElement("div",{style:{display:"flex",flex:1,justifyContent:"center",alignContent:"center",overflow:"scroll"}},this.getNotePad()),s.createElement("div",null,s.createElement(h.default,{isOpen:this.state.isDrawerOpen,name:this.props.name,width:t,style:m,onClose:()=>{this.setState({isDrawerOpen:!1})},pairingRequest:this.displayQRCode,selectNote:this.selectNote,showQRCodeLink:!this.props.showQRCodeLink,logout:this.logout})),s.createElement(f.default,{onDismiss:()=>{this.setState({displayQRCode:!1})},isOpen:this.state.displayQRCode,style:b}),s.createElement(a.default,{appElement:e,isOpen:this.props.showModal&&!this.state.runInOfflineMode,style:b,contentLabel:"Welcome"},s.createElement("div",{style:{flex:1}},s.createElement("a",{href:"https://textile.io",target:"_blank",style:{paddingBottom:15}},s.createElement("img",{src:"https://gateway.textile.cafe/ipfs/QmarZwQEri4g2s8aw9CWKhxAzmg6rnLawGuSGYLSASEow6/0/d",width:30,height:30})),s.createElement("div",{style:{maxWidth:420}},s.createElement("p",{className:"text",dangerouslySetInnerHTML:{__html:this.props.modalText}})),s.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:15,cursor:"pointer"}},s.createElement("a",{className:"header",style:{color:"#2935ff"},onClick:()=>{this.setState({runInOfflineMode:!0})}},"Ignore")))),s.createElement("div",{style:{position:"absolute",bottom:"2vw",left:"4vw",background:"none"}},this.syncWarning()))}})},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(0)),s=n(26),i=o(n(27));const a=[{onKeyDown(e,t,n){const o={blockType:/^(heading-one|heading-two)$/,exitBlockType:"paragraph",onEmptyBlock:!1,unwrap:!1};if("Enter"!==e.key&&!e.shiftKey)return n();const r=t.value.startBlock,s=r.type,i=r.isEmpty,a=RegExp(o.blockType);if(a.test(s)&&o.blockType===s){if(o.onEmptyBlock){if(i){if(o.unwrap){const e=t.value.document.getParent(r.key).type;return t.setBlocks(o.exitBlockType).unwrapBlock(e)}return t.setBlocks(o.exitBlockType)}return}return t.insertBlock(o.exitBlockType)}return n()}}];t.default=class extends r.default.Component{constructor(){super(...arguments),this.componentDidMount=(()=>{this.updateMenu()}),this.componentDidUpdate=(()=>{this.updateMenu()}),this.updateMenu=(()=>{const e=this.menu;if(!e)return;const{value:t}=this.props,{fragment:n,selection:o}=t;if(o.isBlurred||o.isCollapsed||""===n.text)return void e.removeAttribute("style");const r=window.getSelection(),s=r&&r.getRangeAt(0),i=s?s.getBoundingClientRect():{top:10,left:10,width:100};e.style.opacity="1",e.style.top=`${i.top-60}px`,e.style.height="46px",e.style.left=`${i.left+window.pageXOffset-e.offsetWidth/2+i.width/2}px`}),this.onChange=(e=>{this.props.onChange(e.value)}),this.renderNode=((e,t,n)=>{const{attributes:o,children:s,node:i}=e;switch(i.type){case"heading-one":return r.default.createElement("h1",Object.assign({},o),s);case"heading-two":return r.default.createElement("h2",Object.assign({},o),s);case"numbered-list":return r.default.createElement("ol",Object.assign({},o),s);case"list-item":return r.default.createElement("li",Object.assign({},e.attributes),e.children);default:return n()}}),this.renderEditor=((e,t,n)=>{const o=n();return r.default.createElement(r.default.Fragment,null,o,r.default.createElement(i.default,{innerRef:e=>{this.menu=e},editor:t}))}),this.renderMark=((e,t,n)=>{const{children:o,mark:s,attributes:i}=e;switch(s.type){case"bold":return r.default.createElement("strong",Object.assign({},i),o);case"code":return r.default.createElement("code",Object.assign({},i),o);case"italic":return r.default.createElement("em",Object.assign({},i),o);case"underlined":return r.default.createElement("u",Object.assign({},i),o);default:return n()}})}render(){return r.default.createElement(s.Editor,{autoFocus:!0,placeholder:"Enter some text...",value:this.props.value,onChange:this.onChange,renderNode:this.renderNode,renderEditor:this.renderEditor,renderMark:this.renderMark,style:this.props.style,className:"text",plugins:a})}}},function(e,t){e.exports=require("slate-react")},function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(0)),i=o(n(1)),a=r(n(4)),l=o(n(28));t.Menu=l.default("div")`
  & > * {
    display: inline-block;
  }
  & > * + * {
    margin-left: 15px;
  }
`;const c=l.default(t.Menu)`
  position: absolute;
  z-index: 1000;
  top: -10000px;
  left: -10000px;
  opacity: 0;
  background-color: #fff;
  border: 1px solid #AAA;
  border-radius: 4px;
  display: flex;
  flex-direction: row;
  align-content: space-between;
  justify-content: space-between;
  height: 184px;
  transition: opacity 0.75s;
`;t.default=class extends s.default.Component{constructor(){super(...arguments),this.onClickMark=((e,t)=>{const{editor:n}=this.props;e.preventDefault(),n.toggleMark(t)}),this.getIcon=((e,t,n)=>{const o={border:t?"1px solid rgba(0,0,0,0.2)":"1px solid #FFF",borderRadius:4,padding:10,margin:2,fontSize:20,color:"black",zIndex:10001};switch(e){case"format_heading_one":return s.default.createElement(a.FormatSize,{style:o,onMouseDown:n});case"format_heading_two":return s.default.createElement(a.FormatSize,{style:Object.assign({},o,{fontSize:14,lineHeight:20}),onMouseDown:n});case"format_bold":return s.default.createElement(a.FormatBold,{style:o,onMouseDown:n});case"format_italic":return s.default.createElement(a.FormatItalic,{style:o,onMouseDown:n});case"format_underlined":return s.default.createElement(a.FormatUnderlined,{style:o,onMouseDown:n});case"code":return s.default.createElement(a.Code,{style:o,onMouseDown:n});case"format_list_numbered":return s.default.createElement(a.FormatListNumbered,{style:o,onMouseDown:n})}}),this.renderMarkButton=((e,t)=>{const{editor:n}=this.props,{value:o}=n,r=o.activeMarks.some(t=>t.type===e);return this.getIcon(t,r,t=>{this.onClickMark(t,e)})}),this.onClickBlock=((e,t)=>{e.preventDefault();const{editor:n}=this.props,{value:o}=n,{document:r}=o;if("bulleted-list"!==t&&"numbered-list"!==t){const e=this.hasBlock(t);n.setBlocks(e?"paragraph":t)}else{const e=this.hasBlock("list-item"),s=o.blocks.some(e=>!!r.getClosest(e.key,e=>e.type===t));e&&s?n.setBlocks("paragraph").unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):e?n.unwrapBlock("bulleted-list"===t?"numbered-list":"bulleted-list").wrapBlock(t):n.setBlocks("list-item").wrapBlock(t)}}),this.hasBlock=(e=>{const{editor:t}=this.props,{value:n}=t;return n.blocks.some(t=>t.type===e)}),this.renderBlockButton=((e,t)=>{let n=this.hasBlock(e);if(["numbered-list","bulleted-list"].includes(e)){const{editor:t}=this.props,{value:o}=t,{document:r,blocks:s}=o;if(s.size>0){const t=r.getParent(s.first().key);n=this.hasBlock("list-item")&&t&&t.type===e}}return this.getIcon(t,n,t=>{this.onClickBlock(t,e)})})}render(){const{innerRef:e}=this.props,t=window.document.getElementById("app");if(t)return i.default.createPortal(s.default.createElement(c,{ref:e},this.renderBlockButton("heading-one","format_heading_one"),this.renderBlockButton("heading-two","format_heading_two"),this.renderMarkButton("bold","format_bold"),this.renderMarkButton("italic","format_italic"),this.renderMarkButton("underlined","format_underlined"),this.renderMarkButton("code","code"),this.renderBlockButton("numbered-list","format_list_numbered")),t)}}},function(e,t){e.exports=require("@emotion/styled")},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(0)),i=r(n(7)),a=o(n(4));t.default=class extends s.Component{constructor(){super(...arguments),this.cloudUpdateIcon=(()=>this.props.requiresSave&&this.props.requiresSync?s.createElement(a.CloudUpload,{onClick:this.props.saveAndSelectNote,style:Object.assign({},this.props.buttonStyle,{background:"#999"})}):this.props.requiresSync?s.createElement(a.CloudDone,{style:Object.assign({},this.props.buttonStyle,{background:"#999"})}):s.createElement(a.CloudDone,{style:Object.assign({},this.props.buttonStyle)}))}render(){return s.createElement("div",{style:this.props.style},s.createElement(i.default,{title:"Drawer"},s.createElement(a.Menu,{onClick:this.props.toggleDrawer,style:Object.assign({},this.props.buttonStyle,{marginRight:20})})),s.createElement(i.default,{title:"Delete"},s.createElement(a.Delete,{onClick:this.props.deleteNote,style:this.props.buttonStyle})),s.createElement(i.default,{title:"New"},s.createElement(a.CropDin,{onClick:this.props.clearNote,style:this.props.buttonStyle})),s.createElement(i.default,{title:"Save"},this.cloudUpdateIcon()))}}},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(0)),i=n(3),a=r(n(6)),l=r(n(9)),c=r(n(31));n(5);t.default=i.connect(e=>({inviteURL:"https://textile.io/"}),void 0)(class extends s.Component{constructor(){super(...arguments),this.state={seed:void 0},this.componentDidUpdate=(e=>{if(!this.props.isOpen&&e.isOpen&&!this.state.seed)try{l.default.account.seed().then(e=>{this.setState({seed:e})})}catch(e){console.info("ERROR - ",e)}}),this.renderQR=(()=>{if(this.state.seed)return this.state.seed,s.createElement(c.default,{style:{alignSelf:"center"},value:"url"})})}render(){const e=document.getElementById("app")||{};return s.createElement(a.default,{appElement:e,isOpen:this.props.isOpen,style:this.props.style,contentLabel:"pair"},s.createElement("div",{style:{flex:1,flexDirection:"column",maxWidth:300,alignContent:"center",justifyContent:"center"}},s.createElement("div",{className:"text",style:{overflow:"wrap",textAlign:"center"}},"Install ",s.createElement("a",{href:"https://medium.com/textileio/textile-notes-a-minimalist-tool-for-your-creative-ideas-68b9357d5cd0",target:"_blank"},"Textile Notes")," on your mobile phone. After successfully installing and onboarding, point your phone's native camera at the QR code below."),s.createElement("div",{style:{padding:20,display:"flex",flex:1,flexDirection:"row",alignContent:"center",justifyContent:"center"}},this.renderQR()),s.createElement("div",{style:{display:"flex",justifyContent:"center",paddingTop:15,cursor:"pointer"}},s.createElement("a",{className:"header",style:{color:"#2935ff"},onClick:this.props.onDismiss},"Dismiss"))))}})},function(e,t){e.exports=require("qrcode.react")},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(0)),i=n(3),a=r(n(7)),l=o(n(4)),c=r(n(33)),u=r(n(35));n(5);const d={background:"#2935ff",padding:5,color:"white",marginRight:4,cursor:"pointer"},p="rgba(255, 255, 255, 0.5)";t.default=i.connect(e=>({notes:e.app.notes}),void 0)(class extends s.Component{constructor(){super(...arguments),this.logoutLink=(()=>s.createElement(a.default,{title:"Clear local cache."},s.createElement(l.PowerSettingsNew,{style:Object.assign({},d,{background:"none",color:p}),onClick:this.props.logout}))),this.qrCodeLink=(()=>this.props.showQRCodeLink?s.createElement("div",null):s.createElement(a.default,{title:"Pair with Textile mobile."},s.createElement(l.MobileScreenShare,{style:Object.assign({},d,{background:"none",color:p}),onClick:this.props.pairingRequest}))),this.renderInnerDrawer=(()=>{const e=this.props.name&&""!==this.props.name?this.props.name:"Disconnected";return s.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column",height:"100%",minHeight:"90vh"}},s.createElement("div",{style:{display:"flex",paddingBottom:10}},s.createElement("div",{className:"text",style:{flex:1,marginLeft:20,color:"#9492de",textAlign:"right"}},e)),s.createElement(u.default,{style:{flex:1,paddingTop:20},notes:this.props.notes.map(e=>e),selectNote:this.props.selectNote}),s.createElement("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",zIndex:1e3}},s.createElement("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start"}},this.logoutLink(),this.qrCodeLink()),s.createElement("a",{href:"https://textile.io",target:"_blank",style:{display:"flex",paddingTop:10}},s.createElement("img",{src:"https://gateway.textile.cafe/ipfs/QmarZwQEri4g2s8aw9CWKhxAzmg6rnLawGuSGYLSASEow6/0/d",width:30,height:30}))))})}render(){return s.createElement(c.default,{isOpen:this.props.isOpen,from:"right",width:this.props.width,style:this.props.style,onRequestClose:this.props.onClose},this.renderInnerDrawer())}})},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(0)),i=r(n(6));n(34);const a=500;t.default=class extends s.Component{render(){const{children:e,className:t,from:n,isOpen:o,onAfterOpen:r,onRequestClose:l,overlayClassName:c,style:u,width:d}=this.props,p=`slide-pane_from_${n||"right"}`,f=Object.assign({},u,{width:d||"80%"}),h=document.getElementById("app")||{};return s.createElement(i.default,{appElement:h,className:`slide-pane ${p} ${t||""}`,style:{content:f},closeTimeoutMS:a,isOpen:o,onAfterOpen:r,onRequestClose:l},s.createElement("div",{className:"slide-pane__content"},e))}}},function(e,t,n){},function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(0)),i=r(n(36));n(5);t.default=class extends s.Component{constructor(){super(...arguments),this.renderNote=((e,t)=>{const n=i.default(e.updated).fromNow(),o=e.text.split("\n"),r=o.length?o[0]:"";return s.createElement("div",{className:"text",onClick:()=>{this.props.selectNote(e)},style:{padding:0,margin:0,paddingTop:"1em",marginBottom:"1em",minHeight:"1.4em",maxHeight:"3.6em",lineHeight:"1.4em",overflow:"hidden",cursor:"pointer"},key:e.key},s.createElement("div",{style:{width:"100%",minHeight:"1.4em",maxHeight:"3em",lineHeight:"1.4em",fontSize:"10px",color:"rgba(255, 255, 255, 0.2)"}},n),r)})}render(){const e=this.props.notes.sort((e,t)=>e.updated<t.updated?1:-1).map((e,t)=>this.renderNote(e,t));return s.createElement("div",{style:this.props.style},e)}}},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("slate")},function(e,t){e.exports=require("redux-persist/lib/storage")},function(e,t){e.exports=require("redux-persist/integration/react")},function(e,t,n){}]);